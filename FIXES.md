# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ –≤—ã–ø–∞–¥–∞—é—â–µ–º –º–µ–Ω—é

## –ü—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### 1. üåê –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –∫–Ω–æ–ø–∫–∏ —è–∑—ã–∫–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞**: –í `settings-menu.js` –±—ã–ª –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –æ–∂–∏–¥–∞–ª –≥–ª–æ–±–∞–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `LANGS` –∏–∑ `app.js`, –Ω–æ –æ–Ω–∞ –Ω–µ –±—ã–ª–∞ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∞.

**–†–µ—à–µ–Ω–∏–µ**:
```javascript
// –¢–µ–ø–µ—Ä—å –≤ settings-menu.js –µ—Å—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ —è–∑—ã–∫–æ–≤:
const LANGS = {
    'en': 'EN',
    'ru': 'RU',
    'de': 'DE',
    'fr': 'FR',
    'it': 'IT',
    'es': 'ES'
};

// –ö–Ω–æ–ø–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
Object.keys(LANGS).forEach(code => {
    const btn = document.createElement('button');
    btn.className = 'lang-option';
    btn.textContent = LANGS[code];
    // ...
});
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: ‚úÖ –¢–µ–ø–µ—Ä—å –∫–Ω–æ–ø–∫–∏ EN, RU, DE, FR, IT, ES –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ —Å–µ—Ç–∫–µ 3x2

---

### 2. üî∏ –°—Ç—Ä–∞–Ω–Ω–∞—è –∏–∫–æ–Ω–∫–∞ –º–µ–Ω—é ("–∫—Ä–µ—Å—Ç —Å —á–µ–º-—Ç–æ")

**–ü—Ä–æ–±–ª–µ–º–∞**: –ò–∫–æ–Ω–∫–∞ settings –±—ã–ª–∞ —Å–ª–æ–∂–Ω–æ–π –∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–µ–Ω–¥–µ—Ä–∏–ª–∞—Å—å.

**–°—Ç–∞—Ä–∞—è –∏–∫–æ–Ω–∫–∞** (–ø—Ä–æ–±–ª–µ–º–Ω–∞—è):
```svg
<svg viewBox="0 0 24 24">
  <circle cx="12" cy="12" r="3"/>
  <path d="M12 1v6m0 6v6m9-9h-6m-6 0H3m15.364 6.364l-4.243-4.243m0 0l-4.242-4.242m4.242 4.242l-4.242 4.243m4.242-4.243l4.243 4.243"/>
</svg>
```

**–ù–æ–≤–∞—è –∏–∫–æ–Ω–∫–∞** (—á–∏—Å—Ç–∞—è —à–µ—Å—Ç–µ—Ä–µ–Ω–∫–∞):
```svg
<svg width="18" height="18" viewBox="0 0 24 24">
  <circle cx="12" cy="12" r="3"></circle>
  <path d="M12 1v6m0 6v6"></path>
  <path d="M17 12h6M1 12h6"></path>
  <path d="m4.2 19.8 4.2-4.2m7.6-7.6 4.2-4.2"></path>
  <path d="m19.8 19.8-4.2-4.2M7.8 7.8 3.6 3.6"></path>
</svg>
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: ‚úÖ –ß–∏—Å—Ç–∞—è –∏–∫–æ–Ω–∫–∞ —à–µ—Å—Ç–µ—Ä–µ–Ω–∫–∏ —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π –≤—Ä–∞—â–µ–Ω–∏—è (45¬∞)

---

### 3. üìÅ –õ–∏—à–Ω—è—è –∫–Ω–æ–ø–∫–∞ "–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª" (–ö–†–ò–¢–ò–ß–ï–°–ö–û–ï)

**–ü—Ä–æ–±–ª–µ–º–∞**: `<input type="file" id="importFile">` –æ—Ç–æ–±—Ä–∞–∂–∞–ª—Å—è –∫–∞–∫ –≤–∏–¥–∏–º–∞—è –∫–Ω–æ–ø–∫–∞, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ `style="display:none;"`. –≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ –∏–∑-–∑–∞:
- CSS —Å–ø–µ—Ü–∏—Ñ–∏–∫–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –¥–ª—è `input[type=file]`
- –ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è —Å—Ç–∏–ª–µ–π –æ—Ç flex/grid –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ `.settings-section`
- –†–∞–∑–ª–∏—á–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–∞—Ö (Chrome/Firefox/Safari)

**–°—Ç–∞—Ä—ã–π –ø–æ–¥—Ö–æ–¥** (–ø—Ä–æ–±–ª–µ–º–Ω—ã–π):
```html
<button id="importBtn">Import</button>
<input id="importFile" type="file" accept=".json" style="display:none;">
<!-- input –≤—Å—ë —Ä–∞–≤–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–ª—Å—è –∫–∞–∫ "–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª | –§–∞–π–ª –Ω–µ –≤—ã–±—Ä–∞–Ω" -->
```

**–ù–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥** (–±–µ–∑ input —ç–ª–µ–º–µ–Ω—Ç–∞):
```javascript
// –ò—Å–ø–æ–ª—å–∑—É–µ–º File System Access API (Chrome 86+, Edge 86+)
async function triggerImport() {
    try {
        if ('showOpenFilePicker' in window) {
            // –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π API - –Ω–∞—Ç–∏–≤–Ω—ã–π –¥–∏–∞–ª–æ–≥ –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–∞
            const [fileHandle] = await window.showOpenFilePicker({
                types: [{
                    description: 'JSON Files',
                    accept: { 'application/json': ['.json'] }
                }],
                multiple: false
            });
            
            const file = await fileHandle.getFile();
            await importData(file);
        } else {
            // Fallback –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            input.onchange = async (e) => {
                const file = e.target.files[0];
                if (file) await importData(file);
                input.remove(); // –£–¥–∞–ª—è–µ–º –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
            };
            input.click();
        }
    } catch (error) {
        if (error.name !== 'AbortError') {
            console.error('Import error:', error);
        }
    }
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: ‚úÖ –¢–æ–ª—å–∫–æ 2 –∫–Ω–æ–ø–∫–∏ –≤ —Å–µ–∫—Ü–∏–∏ DATA:
- **Export** - —Å–∫–∞—á–∏–≤–∞–µ—Ç JSON —Ñ–∞–π–ª
- **Import** - –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –Ω–∞—Ç–∏–≤–Ω—ã–π –¥–∏–∞–ª–æ–≥ –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–∞

**–ù–∏–∫–∞–∫–∏—Ö —Å–∫—Ä—ã—Ç—ã—Ö input —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ DOM!**

---

### 4. üîó –≠–∫—Å–ø–æ—Ä—Ç `setLanguage` –¥–ª—è settings-menu.js

**–ü—Ä–æ–±–ª–µ–º–∞**: `settings-menu.js` –Ω–µ –º–æ–≥ –≤—ã–∑–≤–∞—Ç—å `setLanguage()` –∏–∑ `app.js`.

**–†–µ—à–µ–Ω–∏–µ** –≤ `app.js`:
```javascript
// Export setLanguage to window for settings-menu.js
window.setLanguage = setLanguage;

async function setLanguage(lang) {
    STATE.lang = lang;
    localStorage.setItem('lang', lang);
    // ...
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: ‚úÖ –ö–Ω–æ–ø–∫–∏ —è–∑—ã–∫–æ–≤ —Ç–µ–ø–µ—Ä—å –ø–µ—Ä–µ–∫–ª—é—á–∞—é—Ç —è–∑—ã–∫ –∏ –æ–±–Ω–æ–≤–ª—è—é—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### File System Access API vs Input Element

| –ú–µ—Ç–æ–¥ | –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ | –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ |
|-------|-------------|------------|
| **`<input type="file">`** | –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ | –í–∏–¥–∏–º—ã–π —ç–ª–µ–º–µ–Ω—Ç –≤ DOM, —Å–ª–æ–∂–Ω–æ —Å–∫—Ä—ã—Ç—å |
| **File System Access API** | –ù–∞—Ç–∏–≤–Ω—ã–π –¥–∏–∞–ª–æ–≥, –Ω–µ—Ç DOM —ç–ª–µ–º–µ–Ω—Ç–æ–≤ | –¢–æ–ª—å–∫–æ Chrome 86+, Edge 86+ |
| **–í—Ä–µ–º–µ–Ω–Ω—ã–π input** (fallback) | –†–∞–±–æ—Ç–∞–µ—Ç –≤–µ–∑–¥–µ, —É–¥–∞–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è | –¢—Ä–µ–±—É–µ—Ç —Å–æ–∑–¥–∞–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–∞ |

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:

```javascript
if ('showOpenFilePicker' in window) {
    // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π API
    const [fileHandle] = await window.showOpenFilePicker(...);
} else {
    // –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π input, –∫–æ—Ç–æ—Ä—ã–π —É–¥–∞–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–∞
    const input = document.createElement('input');
    input.click();
    // input.remove() –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤ onchange
}
```

**–ü–æ—á–µ–º—É —ç—Ç–æ –ª—É—á—à–µ**:
1. ‚úÖ –ù–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ DOM
2. ‚úÖ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π API –¥–ª—è –Ω–æ–≤—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤
3. ‚úÖ Graceful degradation –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤
4. ‚úÖ –ß–∏—Å—Ç—ã–π HTML –±–µ–∑ —Å–∫—Ä—ã—Ç—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤

---

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### üé® CSS —É–ª—É—á—à–µ–Ω–∏—è

```css
/* –ê–Ω–∏–º–∞—Ü–∏—è –≤—Ä–∞—â–µ–Ω–∏—è –∏–∫–æ–Ω–∫–∏ */
.settings-dropdown.open #settingsBtn svg {
    transform: rotate(45deg);
}

#settingsBtn svg {
    transition: transform .3s cubic-bezier(0.34, 1.56, .64, 1);
}

/* –ê–∫—Ç–∏–≤–Ω–∞—è –∫–Ω–æ–ø–∫–∞ —è–∑—ã–∫–∞ */
.lang-option.active {
    background: var(--btn-primary);
    color: var(--bg);
    border-color: var(--btn-primary);
    font-weight: 700;
}
```

### ‚ôªÔ∏è Fallback –¥–ª—è –Ω–µ–∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ app.js

```javascript
// –ï—Å–ª–∏ app.js –µ—â–µ –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª—Å—è
if (typeof window.setLanguage === 'function') {
    await window.setLanguage(code);
} else {
    // Fallback: —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º
    localStorage.setItem('lang', code);
    location.reload();
}
```

### üõ°Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏–º–ø–æ—Ä—Ç–∞

```javascript
try {
    await triggerImport();
} catch (error) {
    // AbortError = –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–º–µ–Ω–∏–ª –≤—ã–±–æ—Ä —Ñ–∞–π–ª–∞ (–Ω–µ –æ—à–∏–±–∫–∞)
    if (error.name !== 'AbortError') {
        console.error('Import error:', error);
    }
}
```

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–ª–µ–¥—É—é—â–µ–µ:

- [x] –û—Ç–∫—Ä—ã—Ç—å admin.html
- [x] –ù–∞–∂–∞—Ç—å –Ω–∞ –∏–∫–æ–Ω–∫—É —à–µ—Å—Ç–µ—Ä–µ–Ω–∫–∏ (–æ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –ø–æ–≤–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ 45¬∞)
- [x] –£–≤–∏–¥–µ—Ç—å —Ä–∞–∑–¥–µ–ª "LANGUAGE" —Å 6 –∫–Ω–æ–ø–∫–∞–º–∏: EN, RU, DE, FR, IT, ES
- [x] –£–≤–∏–¥–µ—Ç—å —Ä–∞–∑–¥–µ–ª "DATA" —Å **–¢–û–õ–¨–ö–û 2 –∫–Ω–æ–ø–∫–∞–º–∏**: Export –∏ Import
- [x] **–ù–ï –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å** –∫–Ω–æ–ø–∫–∏ "–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª" –∏–ª–∏ "–§–∞–π–ª –Ω–µ –≤—ã–±—Ä–∞–Ω"
- [x] –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —è–∑—ã–∫ –Ω–∞ RU (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–æ–ª–∂–µ–Ω –æ–±–Ω–æ–≤–∏—Ç—å—Å—è)
- [x] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∞–∫—Ç–∏–≤–Ω–∞—è –∫–Ω–æ–ø–∫–∞ —è–∑—ã–∫–∞ –≤—ã–¥–µ–ª–µ–Ω–∞ (—è—Ä–∫–∏–π —Ñ–æ–Ω, –∂–∏—Ä–Ω—ã–π —à—Ä–∏—Ñ—Ç)
- [x] –ù–∞–∂–∞—Ç—å Export (–¥–æ–ª–∂–µ–Ω —Å–∫–∞—á–∞—Ç—å—Å—è JSON)
- [x] –ù–∞–∂–∞—Ç—å Import (–¥–æ–ª–∂–µ–Ω –æ—Ç–∫—Ä—ã—Ç—å—Å—è **–Ω–∞—Ç–∏–≤–Ω—ã–π –¥–∏–∞–ª–æ–≥ –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–∞**)
- [x] –í—ã–±—Ä–∞—Ç—å JSON —Ñ–∞–π–ª (–¥–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è)

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ä–∞–∑–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö:

| –ë—Ä–∞—É–∑–µ—Ä | File System Access API | Fallback |
|---------|------------------------|----------|
| Chrome 86+ | ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è | - |
| Edge 86+ | ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è | - |
| Firefox | - | ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è |
| Safari | - | ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è |
| –°—Ç–∞—Ä—ã–µ –±—Ä–∞—É–∑–µ—Ä—ã | - | ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è |

---

## –ò—Ç–æ–≥–æ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –§–∞–π–ª—ã:
- ‚úÖ `static/js/settings-menu.js` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –∫–Ω–æ–ø–∫–∏ —è–∑—ã–∫–æ–≤, fallback
- ‚úÖ `static/js/app.js` - —ç–∫—Å–ø–æ—Ä—Ç `window.setLanguage`
- ‚úÖ `admin.html` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∏–∫–æ–Ω–∫–∞ SVG, **—É–¥–∞–ª–µ–Ω `<input type="file">`**
- ‚úÖ `static/js/export-import.js` - –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ (File System Access API)

### –†–µ–∑—É–ª—å—Ç–∞—Ç:

‚úÖ **6 –∫–Ω–æ–ø–æ–∫ —è–∑—ã–∫–æ–≤** (EN, RU, DE, FR, IT, ES)  
‚úÖ **–ß–∏—Å—Ç–∞—è –∏–∫–æ–Ω–∫–∞ —à–µ—Å—Ç–µ—Ä–µ–Ω–∫–∏** —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π  
‚úÖ **–¢–û–õ–¨–ö–û 2 –∫–Ω–æ–ø–∫–∏** –≤ —Å–µ–∫—Ü–∏–∏ DATA (Export, Import)  
‚úÖ **–ù–µ—Ç —Å–∫—Ä—ã—Ç—ã—Ö input —ç–ª–µ–º–µ–Ω—Ç–æ–≤** –≤ HTML  
‚úÖ **–†–∞–±–æ—Ç–∞—é—â–µ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —è–∑—ã–∫–∞**  
‚úÖ **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π API** –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ —Å fallback  
‚úÖ **–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã**  

---

**–î–∞—Ç–∞**: 25 —Ñ–µ–≤—Ä–∞–ª—è 2026  
**–ö–æ–º–º–∏—Ç—ã**: 
- [311d3f3](https://github.com/zoixc/lanpaper/commit/311d3f303beb13672d4364a82ed7f1488653e462) - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–∫–æ–Ω–∫–∏ –∏ –∫–Ω–æ–ø–æ–∫ —è–∑—ã–∫–æ–≤
- [e488b17](https://github.com/zoixc/lanpaper/commit/e488b1797e72fd259f09d0b798d69c4a7d4f2499) - –£–¥–∞–ª–µ–Ω–∏–µ input —ç–ª–µ–º–µ–Ω—Ç–∞, File System Access API
