# Changelog

–í—Å–µ –∑–Ω–∞—á–∏–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø—Ä–æ–µ–∫—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É—é—Ç—Å—è –≤ —ç—Ç–æ–º —Ñ–∞–π–ª–µ.

## [0.8.0] - 2026-02-08

### üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

#### –£–ª—É—á—à–µ–Ω–Ω–∞—è Content Security Policy
- –£–¥–∞–ª—ë–Ω `unsafe-inline` –¥–ª—è —Å–∫—Ä–∏–ø—Ç–æ–≤ ‚Äî —Ç–µ–ø–µ—Ä—å –∑–∞–ø—Ä–µ—â–µ–Ω—ã inline JavaScript
- –î–æ–±–∞–≤–ª–µ–Ω `form-action 'self'` ‚Äî –∑–∞—â–∏—Ç–∞ –æ—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ —Å–∞–π—Ç—ã
- –î–æ–±–∞–≤–ª–µ–Ω `base-uri 'self'` ‚Äî –∑–∞—â–∏—Ç–∞ –æ—Ç –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–π —Å base URL
- –î–æ–±–∞–≤–ª–µ–Ω `frame-ancestors 'none'` ‚Äî –∑–∞—â–∏—Ç–∞ –æ—Ç clickjacking
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ `blob:` –¥–ª—è media/img ‚Äî –¥–ª—è blob URLs

#### –ó–∞—â–∏—Ç–∞ –æ—Ç Path Traversal
- –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è `IsValidLocalPath()` —Å –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏:
  - Null bytes (`\x00`)
  - –ê–±—Å–æ–ª—é—Ç–Ω—ã–µ –ø—É—Ç–∏
  - –ü–æ–ø—ã—Ç–∫–∏ –≤—ã—Ö–æ–¥–∞ –∑–∞ –ø—Ä–µ–¥–µ–ª—ã –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ (`..`)
  - UNC –ø—É—Ç–∏ –Ω–∞ Windows (`\\`)
- –î–≤–æ–π–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ `filepath.Abs()` ‚Äî –ø—É—Ç—å –¥–æ–ª–∂–µ–Ω –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –≤–Ω—É—Ç—Ä–∏ –±–∞–∑–æ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–ø—ã—Ç–æ–∫ path traversal

#### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ Security Headers
- `X-XSS-Protection: 1; mode=block`
- `Referrer-Policy: strict-origin-when-cross-origin`
- `Permissions-Policy: geolocation=(), microphone=(), camera=()`

#### –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–æ–≤ –∏–∑ header –ø–µ—Ä–µ–¥ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π
- –í–∞–ª–∏–¥–∞—Ü–∏—è content-type –¥–ª—è –∑–∞–≥—Ä—É–∂–∞–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–∫–ª–æ–Ω—ë–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

#### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- `"Security: blocked invalid path attempt"`
- `"Security: blocked path traversal attempt"`
- `"Failed authentication attempt from IP"`
- `"Rate limit exceeded for IP"`
- `"Rejected unsupported content type"`

### ‚ö° –ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å

#### Graceful Shutdown
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∏–≥–Ω–∞–ª–æ–≤ `SIGTERM` –∏ `SIGINT`
- –¢–∞–π–º–∞—É—Ç 30 —Å–µ–∫—É–Ω–¥ –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ç–µ–∫—É—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏

#### HTTP Server Timeouts
- `ReadTimeout: 30s` ‚Äî –∑–∞—â–∏—Ç–∞ –æ—Ç –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
- `WriteTimeout: 30s` ‚Äî –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–µ—Ç–∞
- `IdleTimeout: 120s` ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–æ—Å—Ç–∞–∏–≤–∞—é—â–∏—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

#### –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
–í—Å–µ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º—ã–µ –æ—à–∏–±–∫–∏ (`_`) —Ç–µ–ø–µ—Ä—å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è:
- `json.Marshal/Encode` ‚Äî –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- `os.Remove` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ `os.IsNotExist` –ø–µ—Ä–µ–¥ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- `os.Stat` ‚Äî –≤–æ–∑–≤—Ä–∞—Ç HTTP 500 –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- `io.Copy` ‚Äî –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
- `file.Seek` ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

#### –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
–í—Å–µ –ª–æ–≥–∏ —Ç–µ–ø–µ—Ä—å —Å–æ–¥–µ—Ä–∂–∞—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç:
- `"Error saving wallpapers after upload: %v"`
- `"Error removing old image %s: %v"`
- `"Failed to create directory %s: %v"`
- `"Error stating uploaded file %s: %v"`

### üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

#### –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –≤ –º–æ–¥—É–ª–∏
–ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª `main.go` —É–º–µ–Ω—å—à–µ–Ω —Å 900+ –¥–æ 80 —Å—Ç—Ä–æ–∫. –ö–æ–¥ —Ä–∞–∑–¥–µ–ª—ë–Ω –Ω–∞:

**config/**
- `config.go` ‚Äî –ó–∞–≥—Ä—É–∑–∫–∞ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**handlers/**
- `admin.go` ‚Äî –ê–¥–º–∏–Ω API (wallpapers, links, external images)
- `upload.go` ‚Äî –õ–æ–≥–∏–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤ (upload, download, local)
- `public.go` ‚Äî –ü—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º
- `common.go` ‚Äî –û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã (–≤–∞–ª–∏–¥–∞—Ü–∏—è –∏–º—ë–Ω)

**middleware/**
- `auth.go` ‚Äî Basic Authentication
- `security.go` ‚Äî Security headers –∏ CSP
- `ratelimit.go` ‚Äî Rate limiting —Å –æ—á–∏—Å—Ç–∫–æ–π

**storage/**
- `wallpaper.go` ‚Äî –•—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö —Å –º–µ—Ç–æ–¥–∞–º–∏ Get/Set/Delete/GetAll
- –§—É–Ω–∫—Ü–∏—è `PruneOldImages()` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—á–∏—Å—Ç–∫–∏

**utils/**
- `validation.go` ‚Äî –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—É—Ç–µ–π –∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ IP

#### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞
- ‚úÖ –õ—É—á—à–∞—è —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –∫–æ–¥–∞
- ‚úÖ –£–ø—Ä–æ—â—ë–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- ‚úÖ –Ø–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ –∏–º–ø–æ—Ä—Ç—ã

### üìù –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- –û–±–Ω–æ–≤–ª—ë–Ω README.md —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –Ω–æ–≤—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –º–æ–¥—É–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- –£–ª—É—á—à–µ–Ω—ã —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –î–æ–±–∞–≤–ª–µ–Ω —ç—Ç–æ—Ç CHANGELOG

### üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ warnings –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞ Go
- –£–¥–∞–ª–µ–Ω—ã –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–º–ø–æ—Ä—Ç—ã
- –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
- –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ module paths –≤ –∏–º–ø–æ—Ä—Ç–∞—Ö

## [0.7.7] - 2024-XX-XX

### –î–æ–±–∞–≤–ª–µ–Ω–æ
- –ë–∞–∑–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–∏–¥–µ–æ (MP4, WebM)
- –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
- Basic Auth
- Rate limiting
- Docker –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- –ü—Ä–æ–∫—Å–∏ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

---

**–§–æ—Ä–º–∞—Ç:** [Semantic Versioning](https://semver.org/)
**Changelog:** [Keep a Changelog](https://keepachangelog.com/)
